<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MARACA — MK01</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <link rel="stylesheet" href="./assets/style.css"/>
</head>
<body>
  <div class="safe">
    <div class="shell">
      <div class="topbar">
        <div class="brand">
          <a href="./kitchens.html" style="display:flex;align-items:center;gap:10px">
            <img src="./assets/maraca_logo.png" alt="MARACA"/>
            <div>
              <b>MARACA</b>
              <div style="color:var(--muted);font-size:12px;margin-top:3px">MK01</div>
            </div>
          </a>
        </div>

        <div class="pills">
          <button class="pill" id="lang">EN / AR</button>
          <a class="pill" href="./kitchens.html" data-en="Back" data-ar="رجوع">Back</a>
        </div>
      </div>

      <div class="kwrap">
        <div class="card viewer">
          <model-viewer
            id="mv"
            src="./assets/mk01_kitchen.glb"
            ar
            ar-modes="webxr scene-viewer quick-look"
            camera-controls
            shadow-intensity="1"
            exposure="1"
            environment-image="neutral"
            touch-action="pan-y"
            alt="MARACA MK01 Kitchen 3D">
            <button slot="ar-button" class="btn primary" style="position:absolute;left:14px;bottom:14px;">
              <span data-en="View in Your Space" data-ar="اعرضه في مكانك">View in Your Space</span>
            </button>
          </model-viewer>
          <div class="hint" data-en="Tip: drag to rotate. Pinch to zoom. Use the AR button on supported devices."
               data-ar="نصيحة: اسحب للدوران، قرّب/بعّد للتكبير، واستخدم زر AR على الأجهزة المدعومة.">
            Tip: drag to rotate. Pinch to zoom. Use the AR button on supported devices.
          </div>
        </div>

        <div class="card panel">
          <div class="h1">
            <div>
              <h2>MK01 — Dark Luxury Kitchen</h2>
              <span data-en="Full demo customization (UI only)." data-ar="تخصيص كامل (واجهة فقط).">Full demo customization (UI only).</span>
            </div>
          </div>

          <div class="section">
            <h4 data-en="Kitchen Type" data-ar="نوع المطبخ">Kitchen Type</h4>
            <select id="type">
              <option value="linear" data-en="Linear + Island" data-ar="خطّي + جزيرة">Linear + Island</option>
              <option value="lshape" data-en="L-Shape" data-ar="شكل L">L-Shape</option>
              <option value="ushape" data-en="U-Shape" data-ar="شكل U">U-Shape</option>
            </select>
          </div>

          <div class="section">
            <h4 data-en="Materials & Colors" data-ar="الخامات والألوان">Materials & Colors</h4>
            <div class="row2">
              <div>
                <label data-en="Wood Type" data-ar="نوع الخشب">Wood Type</label>
                <select id="wood">
                  <option value="mdf">MDF</option>
                  <option value="hpl">HPL</option>
                  <option value="walnut" selected>Walnut</option>
                  <option value="oak">Oak Veneer</option>
                </select>
              </div>
              <div>
                <label data-en="Cabinet Finish" data-ar="تشطيب الخزائن">Cabinet Finish</label>
                <select id="finish">
                  <option value="matte_black" selected>Matte Black</option>
                  <option value="dark_gray">Dark Gray</option>
                  <option value="warm_walnut">Warm Walnut</option>
                  <option value="ivory">Ivory</option>
                </select>
              </div>
            </div>

            <div style="margin-top:10px">
              <label data-en="Accent Color" data-ar="لون الإكسسوارات">Accent Color</label>
              <input id="accent" type="color" value="#DE7A31"/>
            </div>
          </div>

          <div class="section">
            <h4 data-en="Appliances" data-ar="الأجهزة">Appliances</h4>
            <div class="checks">
              <label class="chk"><input type="checkbox" id="oven" checked> <span data-en="Oven" data-ar="فرن">Oven</span></label>
              <label class="chk"><input type="checkbox" id="cooktop" checked> <span data-en="Cooktop" data-ar="سطح طبخ">Cooktop</span></label>
              <label class="chk"><input type="checkbox" id="dishwasher"> <span data-en="Dishwasher" data-ar="غسالة صحون">Dishwasher</span></label>
              <label class="chk"><input type="checkbox" id="hood" checked> <span data-en="Hood" data-ar="شفاط">Hood</span></label>
              <label class="chk"><input type="checkbox" id="fridge" checked> <span data-en="Fridge" data-ar="ثلاجة">Fridge</span></label>
            </div>
          </div>

          <div class="section">
            <h4 data-en="Counts" data-ar="الأعداد">Counts</h4>
            <div class="row2">
              <div>
                <label data-en="Shelves" data-ar="الرفوف">Shelves</label>
                <input id="shelves" type="range" min="2" max="12" value="6"/>
              </div>
              <div>
                <label data-en="Drawers" data-ar="الأدراج">Drawers</label>
                <input id="drawers" type="range" min="0" max="12" value="5"/>
              </div>
            </div>
            <div class="row2" style="margin-top:10px">
              <div>
                <label data-en="Tall Units" data-ar="الوحدات الطويلة">Tall Units</label>
                <input id="tall" type="range" min="0" max="6" value="2"/>
              </div>
              <div>
                <label data-en="Base Units" data-ar="الوحدات السفلية">Base Units</label>
                <input id="base" type="range" min="4" max="24" value="12"/>
              </div>
            </div>
          </div>

          <div class="priceBox">
            <div>
              <div class="big" id="price">EGP 0</div>
              <div class="sub" id="note" data-en="Instant estimate for demo. Real app will use factory pricing rules."
                   data-ar="سعر تقديري للتجربة. التطبيق الحقيقي سيستخدم قواعد المصنع.">
                Instant estimate for demo. Real app will use factory pricing rules.
              </div>
            </div>
            <div class="actions">
              <button class="btn ghost" id="cart" data-en="Add to Cart" data-ar="أضف إلى السلة">Add to Cart</button>
              <button class="btn primary" id="buy" data-en="Checkout" data-ar="شراء">Checkout</button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

<script>
  const EGP = new Intl.NumberFormat('en-EG', { style:'currency', currency:'EGP', maximumFractionDigits:0 });

  const pricing = {
    base: 98000,
    wood: { mdf: 1.00, hpl: 1.18, walnut: 1.35, oak: 1.42 },
    finish: { matte_black: 1.10, dark_gray: 1.06, warm_walnut: 1.08, ivory: 1.04 },
    shelvesUnit: 650,
    drawersUnit: 1100,
    tallUnit: 5200,
    baseUnit: 1400,
    appliances: { oven: 9500, cooktop: 7200, dishwasher: 8500, hood: 4200, fridge: 18000 }
  };

  const els = {
    wood: document.getElementById('wood'),
    finish: document.getElementById('finish'),
    shelves: document.getElementById('shelves'),
    drawers: document.getElementById('drawers'),
    tall: document.getElementById('tall'),
    base: document.getElementById('base'),
    oven: document.getElementById('oven'),
    cooktop: document.getElementById('cooktop'),
    dishwasher: document.getElementById('dishwasher'),
    hood: document.getElementById('hood'),
    fridge: document.getElementById('fridge'),
    price: document.getElementById('price'),
    cart: document.getElementById('cart'),
    buy: document.getElementById('buy'),
    lang: document.getElementById('lang')
  };

  function calc(){
    let total = pricing.base;
    total += Number(els.shelves.value) * pricing.shelvesUnit;
    total += Number(els.drawers.value) * pricing.drawersUnit;
    total += Number(els.tall.value) * pricing.tallUnit;
    total += Number(els.base.value) * pricing.baseUnit;

    for (const k of ['oven','cooktop','dishwasher','hood','fridge']){
      if (els[k].checked) total += pricing.appliances[k];
    }

    total *= (pricing.wood[els.wood.value] || 1);
    total *= (pricing.finish[els.finish.value] || 1);

    total = Math.round(total / 100) * 100;
    els.price.textContent = EGP.format(total);
  }

  for (const id of ['wood','finish','shelves','drawers','tall','base','oven','cooktop','dishwasher','hood','fridge']){
    els[id].addEventListener('input', calc);
    els[id].addEventListener('change', calc);
  }

  els.cart.onclick = ()=> alert((lang==='ar') ? 'تمت الإضافة للسلة (تجربة)' : 'Added to cart (demo)');
  els.buy.onclick = ()=> alert((lang==='ar') ? 'الانتقال للدفع (تجربة)' : 'Proceed to checkout (demo)');

  let lang = localStorage.getItem('maraca_lang') || 'en';
  function applyLang(){
    document.documentElement.dir = (lang==='ar') ? 'rtl' : 'ltr';
    for (const el of document.querySelectorAll('[data-en]')){
      el.textContent = (lang==='ar') ? el.getAttribute('data-ar') : el.getAttribute('data-en');
    }
    els.lang.textContent = (lang==='ar') ? 'AR / EN' : 'EN / AR';
  }
  els.lang.onclick = ()=>{ lang = (lang==='ar')?'en':'ar'; localStorage.setItem('maraca_lang', lang); applyLang(); };
  applyLang();

  calc();
</script>
</body>
</html>
